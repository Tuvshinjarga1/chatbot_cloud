<!DOCTYPE html>
<html lang="mn">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chatwoot –¢–µ—Å—Ç (Alternative) - Cloud MN</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
        background-color: #f5f5f5;
      }
      .container {
        background: white;
        padding: 30px;
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }
      .test-button {
        background: #2563eb;
        color: white;
        border: none;
        padding: 12px 24px;
        border-radius: 6px;
        cursor: pointer;
        margin: 10px;
        font-size: 14px;
      }
      .test-button:hover {
        background: #1d4ed8;
      }
      .status {
        padding: 15px;
        margin: 15px 0;
        border-radius: 6px;
        border-left: 4px solid #2563eb;
        background: #eff6ff;
      }
      .success {
        border-left-color: #10b981;
        background: #ecfdf5;
        color: #065f46;
      }
      .error {
        border-left-color: #ef4444;
        background: #fef2f2;
        color: #991b1b;
      }
      .warning {
        border-left-color: #f59e0b;
        background: #fffbeb;
        color: #92400e;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>ü§ñ Chatwoot –¢–µ—Å—Ç (Alternative)</h1>

      <div class="status" id="status">Chatwoot SDK –∞—á–∞–∞–ª–∂ –±–∞–π–Ω–∞...</div>

      <h2>–¢–µ—Å—Ç —Ç–æ–≤—á–Ω—É—É–¥:</h2>
      <button class="test-button" onclick="testChatwootWidget()">
        Widget –Ω—ç—ç—Ö
      </button>

      <button class="test-button" onclick="testManualInit()">
        Manual Init
      </button>

      <button class="test-button" onclick="checkSDKStatus()">SDK —Å—Ç–∞—Ç—É—Å</button>

      <button class="test-button" onclick="testDifferentMethod()">
        ”®”©—Ä –∞—Ä–≥–∞ –æ—Ä–æ–ª–¥–æ—Ö
      </button>

      <h2>–¢–æ—Ö–∏—Ä–≥–æ–æ–Ω—ã –º—ç–¥—ç—ç–ª—ç–ª:</h2>
      <ul>
        <li><strong>Website Token:</strong> demo-token (—Ç–µ—Å—Ç –∑–æ—Ä–∏–ª–≥–æ–æ—Ä)</li>
        <li><strong>Base URL:</strong> https://app.chatwoot.com</li>
        <li><strong>Fallback URL:</strong> https://widget.chatwoot.com</li>
      </ul>

      <div class="status warning">
        <strong>–ê–Ω—Ö–∞–∞—Ä:</strong> –≠–Ω—ç –Ω—å —Ç–µ—Å—Ç —Ñ–∞–π–ª –±”©–≥”©”©–¥ demo token –∞—à–∏–≥–ª–∞–∂
        –±–∞–π–Ω–∞. –ñ–∏–Ω—Ö—ç–Ω—ç website token-–æ–æ –∞—à–∏–≥–ª–∞—Ö—ã–Ω —Ç—É–ª–¥ —ç—Ö —Ñ–∞–π–ª—ã–≥ –∑–∞—Å–≤–∞—Ä–ª–∞–Ω–∞ —É—É.
      </div>
    </div>

    <!-- Chatwoot SDK - Alternative approach -->
    <script>
      console.log("üöÄ Alternative Chatwoot —Ç–µ—Å—Ç —ç—Ö—ç–ª–∂ –±–∞–π–Ω–∞...");

      let sdkLoaded = false;
      let initAttempts = 0;

      function updateStatus(message, type = "info") {
        const statusEl = document.getElementById("status");
        statusEl.textContent = message;
        statusEl.className = `status ${type}`;
        console.log(`üìä Status: ${message} (${type})`);
      }

      function loadChatwootSDK(baseUrl = "https://app.chatwoot.com") {
        return new Promise((resolve, reject) => {
          const script = document.createElement("script");
          script.src = `${baseUrl}/packs/js/sdk.js`;
          script.async = true;
          script.defer = true;

          script.onload = () => {
            console.log(`‚úÖ SDK –∞—á–∞–∞–ª–∞–≥–¥–ª–∞–∞: ${baseUrl}`);
            sdkLoaded = true;
            resolve();
          };

          script.onerror = () => {
            console.error(`‚ùå SDK –∞—á–∞–∞–ª–∞–≥–¥—Å–∞–Ω–≥“Ø–π: ${baseUrl}`);
            reject(new Error(`Failed to load from ${baseUrl}`));
          };

          document.head.appendChild(script);
        });
      }

      async function initializeChatwoot() {
        initAttempts++;
        console.log(`üîÑ Chatwoot —ç—Ö–ª“Ø“Ø–ª—ç—Ö –æ—Ä–æ–ª–¥–ª–æ–≥–æ #${initAttempts}`);

        try {
          // –≠—Ö–ª—ç—ç–¥ app.chatwoot.com-–æ–æ—Å –æ—Ä–æ–ª–¥–æ—Ö
          await loadChatwootSDK("https://app.chatwoot.com");
        } catch (error) {
          console.warn(
            "‚ö†Ô∏è app.chatwoot.com-–æ–æ—Å –∞—á–∞–∞–ª–∞–≥–¥—Å–∞–Ω–≥“Ø–π, widget.chatwoot.com –æ—Ä–æ–ª–¥–æ–∂ –±–∞–π–Ω–∞..."
          );
          try {
            await loadChatwootSDK("https://widget.chatwoot.com");
          } catch (error2) {
            console.error("‚ùå –•–æ—ë—Ä URL-–∞–∞—Å —á –∞—á–∞–∞–ª–∞–≥–¥—Å–∞–Ω–≥“Ø–π");
            updateStatus(
              "SDK –∞—á–∞–∞–ª–∞–≥–¥—Å–∞–Ω–≥“Ø–π! –ò–Ω—Ç–µ—Ä–Ω–µ—Ç —Ö–æ–ª–±–æ–ª—Ç–æ–æ —à–∞–ª–≥–∞–Ω–∞ —É—É.",
              "error"
            );
            return;
          }
        }

        // SDK –∞—á–∞–∞–ª–∞–≥–¥—Å–∞–Ω—ã –¥–∞—Ä–∞–∞ —ç—Ö–ª“Ø“Ø–ª—ç—Ö
        if (window.chatwootSDK) {
          try {
            window.chatwootSDK.run({
              websiteToken: "atrhYjQJmaBw5vCLzm5yTkHN", // –¢–∞–Ω–∞–π –∂–∏–Ω—Ö—ç–Ω—ç token
              baseUrl: "https://app.chatwoot.com",
              locale: "mn",
              hideMessageBubble: false,
              position: "right",
              launcherTitle: "–ë–∏–¥—ç–Ω—Ç—ç–π —Ö–æ–ª–±–æ–≥–¥–æ—Ö",
            });

            console.log("‚úÖ Chatwoot –∞–º–∂–∏–ª—Ç—Ç–∞–π —ç—Ö—ç–ª–ª—ç—ç");
            updateStatus(
              "Chatwoot –±—ç–ª—ç–Ω –±–∞–π–Ω–∞! Widget —Ç–æ–≤—á–∏–π–≥ –¥–∞—Ä–∂ “Ø–∑–Ω—ç “Ø“Ø.",
              "success"
            );

            // 2 —Å–µ–∫—É–Ω–¥—ã–Ω –¥–∞—Ä–∞–∞ $chatwoot —à–∞–ª–≥–∞—Ö
            setTimeout(() => {
              if (window.$chatwoot) {
                console.log("‚úÖ $chatwoot –æ–±—ä–µ–∫—Ç –±—ç–ª—ç–Ω");
                updateStatus("Widget –±“Ø—Ä—ç–Ω –±—ç–ª—ç–Ω –±–∞–π–Ω–∞!", "success");
              } else {
                console.warn("‚ö†Ô∏è $chatwoot –æ–±—ä–µ–∫—Ç –æ–ª–¥—Å–æ–Ω–≥“Ø–π");
                updateStatus(
                  "SDK –∞—á–∞–∞–ª–∞–≥–¥—Å–∞–Ω –±–æ–ª–æ–≤—á widget –±—ç–ª—ç–Ω –±–∏—à –±–∞–π–Ω–∞",
                  "warning"
                );
              }
            }, 2000);
          } catch (error) {
            console.error("‚ùå SDK —ç—Ö–ª“Ø“Ø–ª—ç—Ö—ç–¥ –∞–ª–¥–∞–∞:", error);
            updateStatus(`SDK —ç—Ö–ª“Ø“Ø–ª—ç—Ö—ç–¥ –∞–ª–¥–∞–∞: ${error.message}`, "error");
          }
        } else {
          console.error("‚ùå chatwootSDK –æ–±—ä–µ–∫—Ç –æ–ª–¥—Å–æ–Ω–≥“Ø–π");
          updateStatus("chatwootSDK –æ–±—ä–µ–∫—Ç –æ–ª–¥—Å–æ–Ω–≥“Ø–π!", "error");
        }
      }

      function testChatwootWidget() {
        console.log("üîß Widget –Ω—ç—ç—Ö —Ç–µ—Å—Ç...");

        const methods = [
          () => window.$chatwoot && window.$chatwoot.toggle("open"),
          () => window.chatwootSDK && window.chatwootSDK.toggle("open"),
          () => window.$chatwoot && window.$chatwoot.show(),
          () => window.chatwootSDK && window.chatwootSDK.show(),
        ];

        let success = false;

        for (let i = 0; i < methods.length; i++) {
          try {
            if (methods[i]()) {
              console.log(`‚úÖ –ê—Ä–≥–∞ #${i + 1} –∞–º–∂–∏–ª—Ç—Ç–∞–π`);
              success = true;
              break;
            }
          } catch (error) {
            console.log(`‚ùå –ê—Ä–≥–∞ #${i + 1} –∞–º–∂–∏–ª—Ç–≥“Ø–π:`, error.message);
          }
        }

        if (success) {
          updateStatus("Widget –Ω—ç—ç—Ö –∫–æ–º–∞–Ω–¥ –∏–ª–≥—ç—ç–≥–¥–ª—ç—ç!", "success");
        } else {
          updateStatus("Widget –Ω—ç—ç—Ö –±–æ–ª–æ–º–∂–≥“Ø–π –±–∞–π–Ω–∞!", "error");
        }
      }

      function testManualInit() {
        console.log("üîß Manual initialization —Ç–µ—Å—Ç...");

        if (!sdkLoaded) {
          updateStatus("SDK –∞—á–∞–∞–ª–∞–≥–¥–∞–∞–≥“Ø–π –±–∞–π–Ω–∞!", "error");
          return;
        }

        // Manual initialization –æ—Ä–æ–ª–¥–æ—Ö
        try {
          if (window.chatwootSDK) {
            window.chatwootSDK.run({
              websiteToken: "atrhYjQJmaBw5vCLzm5yTkHN",
              baseUrl: "https://app.chatwoot.com",
              locale: "en", // –ê–Ω–≥–ª–∏ —Ö—ç–ª –æ—Ä–æ–ª–¥–æ—Ö
              hideMessageBubble: false,
            });
            updateStatus("Manual initialization —Ö–∏–π–≥–¥–ª—ç—ç!", "success");
          }
        } catch (error) {
          console.error("‚ùå Manual init –∞–ª–¥–∞–∞:", error);
          updateStatus(`Manual init –∞–ª–¥–∞–∞: ${error.message}`, "error");
        }
      }

      function testDifferentMethod() {
        console.log("üîß ”®”©—Ä –∞—Ä–≥–∞ —Ç–µ—Å—Ç...");

        // DOM –¥—ç—ç—Ä widget —ç–ª–µ–º–µ–Ω—Ç –±–∞–π–≥–∞–∞ —ç—Å—ç—Ö–∏–π–≥ —à–∞–ª–≥–∞—Ö
        const selectors = [
          '[data-widget="chatwoot"]',
          ".woot-widget-holder",
          "#chatwoot-widget",
          ".chatwoot-widget",
          'iframe[src*="chatwoot"]',
        ];

        let found = false;
        selectors.forEach((selector) => {
          const elements = document.querySelectorAll(selector);
          if (elements.length > 0) {
            console.log(`‚úÖ –û–ª–¥—Å–æ–Ω —ç–ª–µ–º–µ–Ω—Ç: ${selector}`, elements);
            found = true;
          }
        });

        if (found) {
          updateStatus("Widget —ç–ª–µ–º–µ–Ω—Ç“Ø“Ø–¥ DOM-–¥ –±–∞–π–Ω–∞!", "success");
        } else {
          updateStatus("Widget —ç–ª–µ–º–µ–Ω—Ç“Ø“Ø–¥ DOM-–¥ –æ–ª–¥—Å–æ–Ω–≥“Ø–π", "warning");
        }

        // Global –æ–±—ä–µ–∫—Ç—É—É–¥—ã–≥ —à–∞–ª–≥–∞—Ö
        const globals = ["chatwootSDK", "$chatwoot", "Chatwoot", "chatwoot"];
        globals.forEach((name) => {
          if (window[name]) {
            console.log(`‚úÖ Global –æ–±—ä–µ–∫—Ç –æ–ª–¥–ª–æ–æ: ${name}`, window[name]);
          }
        });
      }

      function checkSDKStatus() {
        console.log("üîç –î—ç–ª–≥—ç—Ä—ç–Ω–≥“Ø–π —Å—Ç–∞—Ç—É—Å —à–∞–ª–≥–∞–ª—Ç...");

        const status = {
          sdkLoaded,
          initAttempts,
          chatwootSDK: !!window.chatwootSDK,
          $chatwoot: !!window.$chatwoot,
          userAgent: navigator.userAgent,
          timestamp: new Date().toISOString(),
        };

        console.log("üìä –ë“Ø—Ä—ç–Ω —Å—Ç–∞—Ç—É—Å:", status);

        if (status.chatwootSDK || status.$chatwoot) {
          updateStatus("SDK –±—ç–ª—ç–Ω –±–∞–π–Ω–∞! Console-–≥ “Ø–∑–Ω—ç “Ø“Ø.", "success");
        } else {
          updateStatus("SDK –±—ç–ª—ç–Ω –±–∏—à –±–∞–π–Ω–∞!", "error");
        }
      }

      // –•—É—É–¥–∞—Å –∞—á–∞–∞–ª–∞–≥–¥—Å–∞–Ω—ã –¥–∞—Ä–∞–∞ —ç—Ö–ª“Ø“Ø–ª—ç—Ö
      document.addEventListener("DOMContentLoaded", () => {
        console.log("üìÑ DOM –±—ç–ª—ç–Ω, Chatwoot —ç—Ö–ª“Ø“Ø–ª–∂ –±–∞–π–Ω–∞...");
        initializeChatwoot();
      });

      // 5 —Å–µ–∫—É–Ω–¥—ã–Ω –¥–∞—Ä–∞–∞ —Å—Ç–∞—Ç—É—Å —à–∞–ª–≥–∞—Ö
      setTimeout(checkSDKStatus, 5000);
    </script>
  </body>
</html>
